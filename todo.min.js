var T=function(){var e=this;table=document.getElementsByClassName("t")[0],th=document.createElement("thead"),h=th.insertRow(0),tb=document.createElement("tbody"),tf=document.createElement("tfoot");f=tf.insertRow(0),add=document.createElement("button"),download=document.createElement("button");table.appendChild(th);table.appendChild(tf);h.innerHTML=""+"<th><!-- spacer --></th>"+"<th>Q</th>"+"<th>Description</th>"+"<th>Time</th>"+"<th>"+'<button class="add">+</button>'+"</th>";f.innerHTML='<td colspan="5"></td>';f=f.firstChild;this.loadQs(tb);var t=document.createElement("button");t.innerHTML="Remove Completed";t.id="removeComplete";f.appendChild(t);new R(t,"click",function(){for(var t in e.tasks){if(e.tasks.hasOwnProperty(t)){if(e.tasks[t].complete==1){var n=JSON.parse(localStorage.tQs);delete n[t];localStorage.tQs=JSON.stringify(n);window.location.reload()}}}});new R(h.lastChild.children[0],"click",function(){e.addQ(e,tb)});table.appendChild(tb)};T.prototype.addQ=function(e,t,n){var r=function(n){e.tasks[n.uuid]=n;e.renderQ(t,n);e.saveQs()};if(n!==null&&typeof n==="object"){var i={};i.uuid=n.uuid;i.name=n.name;i.time=n.time;i.desc=n.desc;i.complete=n.complete;r(i)}else{var i=new Q;i.m(i,function(){r(i)})}};T.prototype.saveQs=function(){localStorage.setItem("tQs",JSON.stringify(this.tasks))};T.prototype.loadQs=function(e){e.innerHTML="";var t=JSON.parse(localStorage.getItem("tQs"));if(t!==null&&typeof t==="object"){this.tasks=t;var n=this.tasks;for(var r in this.tasks){if(n.hasOwnProperty(r)){this.addQ(this,e,n[r])}}}else if(t!==null&&t!=="object"){delete localStorage.tQs;this.tasks={}}else{this.tasks={}}};T.prototype.renderQ=function(e,t){var n=document.createElement("tr"),r=new Date(Date.parse(t.time)+(new Date).getTimezoneOffset()*6e4),i=r.toString().substring(0,16),s=r.toString().substring(17,18),o=r.toString().substring(19,21);if(s>12){s-=12;var u=" AM"}else var u=" PM";r=i+s+":"+o+u;n.innerHTML="<td></td>"+"<td>"+t.name+"</td>"+"<td><i>"+t.desc+"</i></td>"+"<td>"+r+"</td>"+"<td></td>";check=document.createElement("input");check.type="checkbox";check.id=t.uuid;n.lastChild.appendChild(check);e.appendChild(n);if(t.complete==1){n.className="complete";check.checked="checked"}var a=this;new R(check,"click",function(){t.complete^=true;if(t.complete==1){n.className="complete"}else{n.className=""}a.saveQs()})};var Q=function(){this.uuid=((1+Math.random())*65536|0).toString(16).substring(1);this.name="";this.time="";this.desc="";this.complete=0};Q.prototype.m=function(e,t){var n=document.createElement("div"),r=document.createElement("div"),i=document.createElement("table"),s=document.createElement("tr"),o=document.createElement("tr"),u=document.createElement("tr"),a=document.createElement("tr"),f=document.createElement("button"),l=document.createElement("button"),c=document.createElement("input"),h=document.createElement("input"),p=document.createElement("textarea");n.className="s";n.appendChild(r);r.className="tm";r.appendChild(i);s.innerHTML='<th colspan="2">New Q</th>';i.appendChild(s);o.innerHTML="<td></td><td></td>";i.appendChild(o);o.children[0].appendChild(c);c.type="text";c.placeholder="Q Name";c.id="taskName";o.children[1].appendChild(h);h.type="datetime-local";h.placeholder="Q Time";h.id="taskTime";u.innerHTML='<td colspan="2"></td>';i.appendChild(u);u.children[0].appendChild(p);p.placeholder="Description";p.id="taskDesc";a.innerHTML='<td colspan="2"></td>';i.appendChild(a);f.innerHTML="Add";l.innerHTML="Cancel";a.children[0].appendChild(f);a.children[0].appendChild(l);new R(l,"click",function(){n.parentNode.removeChild(n)});new R(f,"click",function(){e.name=document.getElementById("taskName").value;e.time=document.getElementById("taskTime").value;e.desc=document.getElementById("taskDesc").value;n.parentNode.removeChild(n);t.call()});document.children[0].appendChild(n)};var R=function(e,t,n){if(e.addEventListener){e.addEventListener(t,n,true)}else if(e.attachEvent){e.attachEvent("on"+t,n)}}
